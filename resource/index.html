<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CEF Python with Bootstrap 5</title>
    <!-- Link to Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/mystyle.css" rel="stylesheet">
    <script src="js/jquery-3.7.1.min.js" ></script>



</head>
<body>
    <div align="center">

        <h2>Mail Archive Browser V1.0</h2>
        <table class="table table-border table-hover" style="width: 80%;">
            <tbody>
                <tr>
                    <td class="label_td">Category</td>
                    <td>

                    </td>
                </tr>
                <tr>
                    <td class="label_td">Sender</td>
                    <td><input class="form-control" type="text" name="" id="id_sender"></td>
                </tr>
                <tr>
                    <td class="label_td">Keyword</td>
                    <td><input class="form-control" type="text" name="" id=""></td>
                </tr>
            </tbody>
        </table>
        <button class="btn btn-primary" onclick="query()">Search</button>
    </div>

    <hr>
    
    <div class="container-fluid" >
        <div class="row">
          <div class="col-md-2">

            <table class="table table-hover table-bordered" style="width: 100%;" id="mail_list">


            </table>


          </div>
    
          <div class="col-md-10">
            <iframe class="mail_content" id="myIframe" src="" style="width: 100%; height:100%"></iframe>


        </div>
        </div>
      </div>
      <div class="my-icon">
        <a href="file:///resource/setting.html"><img src="images/setting.png" alt=""></a>
      </div>

    <!-- Link to Bootstrap JavaScript (optional, if needed) -->
    <script src="js/bootstrap.bundle.min.js"></script>

    <script>
        function query(){
            set_mail_list(); // call the python binding

        }


        function setMailList(mail_dict){
            $("#mail_list").html("");
            for (category in mail_dict){
                console.log(category, mail_dict[category])
                var mail_category = $(`<tr><td class='mail_category'>${category}</td></tr>`);
                $("#mail_list").append(mail_category);
                for (mail_name of mail_dict[category]){
                    var mail_item = $(`<tr category='${category}' style='display:none;'><td class='mail_item'>${mail_name}</td></tr>`);
                    $("#mail_list").append(mail_item);
                }
            }

            $(".mail_category").on("click", toggleMailItem);
        }


        function toggleMailItem(){
            console.log($(this));
            var category = $(this).html();
            $(`tr[category='${category}']`).toggle();
        }

        



    </script>



</body>


</html>
